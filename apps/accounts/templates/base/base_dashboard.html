{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Mainly Labs{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f5f6fa;
      color: #222;
      transition: background 0.3s, color 0.3s;
    }

    /* ---------- HEADER (fixed) ---------- */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 20px;
      background: #032b66; /* default blue */
      color: #fff;
      z-index: 1000;
    }
    .logo {
      font-size: 20px;
      font-weight: 700;
    }
    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    /* Avatar circle */
    .avatar {
      width: 42px;
      height: 42px;
      border-radius: 50%; /* perfectly round */
      border: 2px solid #fff;
      object-fit: cover;
      display: block;
    }

    /* Icon buttons */
    .notif-btn {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: #fff;
      transition: background 0.2s, transform 0.2s;
      border-radius: 50%;
      padding: 6px;
    }
    .notif-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.1);
    }

    /* ---------- LANGUAGE DROPDOWN ---------- */
    .language-switcher {
      position: relative;
    }
    #lang-btn {
      background: none;
      border: none;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      color: #fff;
      border-radius: 50%;
      padding: 6px 10px;
      transition: background 0.2s, transform 0.2s;
    }
    #lang-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.1);
    }
    #lang-menu div:hover {
      background: #f0f0f0;
    }

    /* ---------- LAYOUT ---------- */
    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 100px 20px 20px; /* top space for fixed header */
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .content-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }

    .block {
      background: #fff;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,.05);
      transition: background 0.3s, color 0.3s;
    }
    .card {
      background: #fff;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,.05);
      transition: background 0.3s, color 0.3s;
    }
    .card h3 {
      margin-top: 0;
      font-size: 16px;
    }
    .card a {
      display: inline-block;
      margin: 4px 0;
      color: #157a2a; /* green links */
      text-decoration: none;
      font-size: 14px;
      font-weight: 600;
    }
    .card a:hover {
      text-decoration: underline;
    }

    /* ---------- DARK THEME ---------- */
    body.dark-theme {
      background: #1e1e1e;
      color: #ddd;
    }
    body.dark-theme .header {
      background: #094d20;
    }
    body.dark-theme .block,
    body.dark-theme .card,
    body.dark-theme .news,
    body.dark-theme .calendar,
    body.dark-theme .widget,
    body.dark-theme .quick-link {
      background: #2a2a2a;
      color: #ddd;
      border-color: #3a3a3a;
      box-shadow: none;
    }
    body.dark-theme h2,
    body.dark-theme h3,
    body.dark-theme h4 {
      color: #f0f0f0;
    }
    body.dark-theme a {
      color: #4caf50;
    }
    body.dark-theme a:hover {
      text-decoration: underline;
    }
    body.dark-theme .search-bar {
      background: #2a2a2a;
      color: #ddd;
      border: 1px solid #3a3a3a;
    }
    body.dark-theme .search-bar::placeholder {
      color: #aaa;
    }

    /* ---------- RESPONSIVE ---------- */
    @media (min-width: 900px) {
      .cards-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    @media (max-width: 899px) {
      .content-grid {
        grid-template-columns: 1fr;
      }
      .cards-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">MainlyLabs</div>
    <div class="header-actions">
      <!-- Theme toggle -->
      <button id="theme-toggle" class="notif-btn">üåô</button>

      <!-- Notifications (placeholder) -->
      <button id="notif-btn" class="notif-btn">üîî</button>

      <!-- Language switcher -->
      <div class="language-switcher">
        <button id="lang-btn">ES</button>
        <div id="lang-menu" style="display:none; position:absolute; background:#fff; color:#000; border:1px solid #ddd; border-radius:6px; margin-top:6px; right:70px; z-index:2000;">
          <div class="lang-option" data-lang="ES" style="padding:6px 12px; cursor:pointer;">ES</div>
          <div class="lang-option" data-lang="EN" style="padding:6px 12px; cursor:pointer;">EN</div>
          <div class="lang-option" data-lang="RU" style="padding:6px 12px; cursor:pointer;">RU</div>
        </div>
      </div>

      <!-- Avatar -->
      <a href="{% url 'profile' %}">
        <img src="{% static 'images/default-avatar.png' %}" alt="avatar" class="avatar">
      </a>

      <!-- Logout (arrow icon) -->
      <a href="{% url 'logout' %}" class="notif-btn" title="Salir">‚¨ÖÔ∏è</a>
    </div>
  </header>

  <main class="container">
    {% block content %}{% endblock %}
  </main>

  <script>
    // Theme toggle
    const toggleBtn = document.getElementById("theme-toggle");
    if (localStorage.getItem("theme") === "dark") {
      document.body.classList.add("dark-theme");
      toggleBtn.textContent = "‚òÄÔ∏è";
    }
    toggleBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark-theme");
      if (document.body.classList.contains("dark-theme")) {
        toggleBtn.textContent = "‚òÄÔ∏è";
        localStorage.setItem("theme", "dark");
      } else {
        toggleBtn.textContent = "üåô";
        localStorage.setItem("theme", "light");
      }
    });

    // Language switcher
    const langBtn = document.getElementById("lang-btn");
    const langMenu = document.getElementById("lang-menu");
    langBtn.addEventListener("click", () => {
      langMenu.style.display = langMenu.style.display === "none" ? "block" : "none";
    });
    document.querySelectorAll(".lang-option").forEach(option => {
      option.addEventListener("click", () => {
        langBtn.textContent = option.dataset.lang;
        langMenu.style.display = "none";
        alert("Language switched to " + option.dataset.lang); // placeholder
      });
    });

    // Notifications placeholder
    document.getElementById("notif-btn").addEventListener("click", () => {
      alert("No notifications yet."); // placeholder
    });
  </script>
</body>
</html>
